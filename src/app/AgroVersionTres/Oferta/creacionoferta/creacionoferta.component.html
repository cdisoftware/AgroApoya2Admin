<div class="container mt-4 mb-5 pb-5 card" style="background-color: white;">
    <div class="CentrarTexto mt-4">
        <label class="TituloAgro">CREACIÓN DE LA OFERTA</label>
    </div>
    <div class="m-0 p-0 ">
        <!--FECHAS PARA LA OFERTA-->
        <div class="row m-0 p-0">
            <div class="col-12 mb-1">
                <label class="SubTituloAgro">INFORMACIÓN GENERAL PARA LA OFERTA</label>
            </div>
            <div class="col-12">
                <label class="TextoAgroSmall CursorPointer" (click)="BtnModalFechasAnteriores()">
                    Click aquí para validar fechas de ofertas anteriores
                </label>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Fecha Inicio<span class="spObl">*</span></label>
                <input type="date" class="form-control form-control-sm textBox" [(ngModel)]="FechaInicio">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Fecha Fin<span class="spObl">*</span></label>
                <input type="date" class="form-control form-control-sm textBox" [(ngModel)]="FechaFin">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Fecha Entrega<span class="spObl">*</span></label>
                <input type="date" class="form-control form-control-sm textBox" [(ngModel)]="FechaEntrega">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Mascara del sector<span class="spObl">*</span></label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="MascaraSector">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Tipo de oferta<span class="spObl">*</span></label>
                <select class="form-control form-control-sm textBox" [(ngModel)]="IdTipoOfertaSelect">
                    <option value="0">Seleccionar</option>
                    <option *ngFor="let respu of ArrayTipoOferta" value="{{respu.idtipo}}">
                        {{respu.DescOferta}}
                    </option>
                </select>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Tipo domicilio<span class="spObl">*</span></label>
                <select class="form-control form-control-sm textBox" [(ngModel)]="IdTipoDomicilio">
                    <option value="0">Seleccionar</option>
                    <option *ngFor="let respu of ArrayTipoDomicilio" value="{{respu.IdTipo}}">
                        {{respu.DescDomicilio}}
                    </option>
                </select>
            </div>
            <div class="col-sm-4" *ngIf="IdTipoDomicilio == '1'">
                <label class="col-sm-12 TextoAgroSmall">Valor de la compra<span class="spObl">*</span></label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="ValorCompraDomicilio">
            </div>
            <div class="col-sm-4" *ngIf="IdTipoDomicilio == '1' || IdTipoDomicilio == '3'">
                <label class="col-sm-12 TextoAgroSmall">Valor domicilio<span class="spObl">*</span></label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="ValorDomicilio">
            </div>
            <div class="col-12">
                <div class="w-100 mt-3" style=" text-align: center;">
                    <label class="Btn-AgroPrin" style="margin: auto;" (click)="BtnGuardarNuevaOferta()"
                        *ngIf="VerOcultarModulos == '1'">
                        Crear nueva oferta
                    </label>
                    <label class="Btn-AgroPrin" style="margin: auto;" (click)="BtnActualizarOferta()"
                        *ngIf="VerOcultarModulos == '2'">
                        Actualizar información
                    </label>
                </div>
            </div>
        </div>
        <hr *ngIf="VerOcultarModulos == '2' && (IdTipoOfertaSelect == '2' || IdTipoOfertaSelect == '3') ">
        <!--INFORMACION REFERIDOS/GRUPAL DE LA OFERTA-->
        <div class="row m-0 p-0"
            *ngIf="VerOcultarModulos == '2' && (IdTipoOfertaSelect == '2' || IdTipoOfertaSelect == '3')">
            <div class="col-12 mb-1">
                <label class="SubTituloAgro">Información referidos / grupal</label>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Reglaje para la obtener el regalo<span
                        class="spObl">*</span></label>
                <select class="form-control form-control-sm textBox" [(ngModel)]="IdRegaljeReferidos">
                    <option value="0">Seleccionar</option>
                    <option value="{{respu.IdTipo}}" *ngFor="let respu of ArrayReglajeReferidos">
                        {{respu.Nombre}}
                    </option>
                </select>
            </div>
            <!--LIDER-->
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Tipo referidor(Líder)<span class="spObl">*</span> </label>
                <select class="form-control form-control-sm textBox" (change)="ChangeRegaloLiderReferidor()"
                    [(ngModel)]="IdLiderRegalos">
                    <option value="0">Seleccionar</option>
                    <option value="{{respu.IdTipo}}" *ngFor="let respu of ArrayRegalosLider">
                        {{respu.Descripcion}}
                    </option>
                </select>
            </div>
            <div class="col-sm-4" *ngIf="IdLiderRegalos == '2' || IdLiderRegalos == '3'">
                <label class="col-sm-12 TextoAgroSmall">Maximo de valor y/o porcentaje a obtener<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox">
            </div>
            <div class="col-sm-4" *ngIf="IdLiderRegalos == '2' || IdLiderRegalos == '3'">
                <label class="col-sm-12 TextoAgroSmall">Numero de registros para obtener valor y/o porcentaje<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox">
            </div>
            <div class="col-sm-4" *ngIf="IdLiderRegalos == '2' || IdLiderRegalos == '3'">
                <label class="col-sm-12 TextoAgroSmall">Valor y/o porcentaje a obtener<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox">
            </div>
            <div class="col-sm-4" *ngIf="IdLiderRegalos == '1'">
                <label class="col-sm-12 TextoAgroSmall">Producto regalo<span class="spObl">*</span>
                </label>
                <select class="form-control form-control-sm textBox" (change)="changeProductosRegaloDisponiblesLider()"
                    [(ngModel)]="IdProdRegaloLider">
                    <option value="0">Seleccionar</option>
                    <option value="{{respu.IdOferta}}" *ngFor="let respu of ArregloProductosRegaloLider">
                        {{respu.NombreProducto}}
                    </option>
                </select>
            </div>
            <div class="col-sm-4" *ngIf="IdLiderRegalos == '1'">
                <label class="col-sm-12 TextoAgroSmall">Maximo de regalos a obtener<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="MaxiRegaloLider">
            </div>
            <div class="col-sm-4" *ngIf="IdLiderRegalos == '1'">
                <label class="col-sm-12 TextoAgroSmall">Registros para cada regalo<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="RegistroxRegalo">
            </div>
            <div class="col-md-6 m-0 p-1 mt-2" *ngIf="IdLiderRegalos == '1' && IdProdRegaloLider != '0'">
                <div class="m-0 p-2" *ngFor="let respu of  ArregloInfoRegaloLider"
                    style="background-color: #ffffff; border: 1px solid gainsboro; border-radius: 5px;">
                    <label class="Llave" style="font-size: 12px; color: #45ab1b !important;">
                        {{respu.NombreProducto}}
                    </label>
                    <label class="Llave" style="font-size: 12px; color: red !important;">
                        &nbsp; - {{respu.DescrTipoVentaProducto}}
                    </label>
                    <div style="display: flex; background-color: #ffffff; padding: 5px;">
                        <img src="{{RutaImagenProducto}}{{respu.ImagenOferta}}" style="height: 130px; width: 130px;">
                        <div style="width: 100%; padding: 10px;">
                            <label><small><strong>{{respu.DescripcionCorta}}</strong> </small></label>
                            <br>
                            <label><small>{{respu.DescripcionLarga}}</small></label>
                            <div style="width: 100%; padding: 10px; display: flex; justify-content: space-between;">
                                <div class="mt-3" style=" text-align: center;" *ngIf="respu.IdEstado != '0'">
                                    <label class="Btn-AgroPrin" style="margin: auto;"
                                        (click)="BtnModalDetallePresentaciones(respu)">
                                        Presentaciones
                                    </label>
                                </div>
                                <div class="mt-3" style=" text-align: center;" *ngIf="respu.IdEstado != '0'">
                                    <label class="Btn-AgroPrin" style="margin: auto;"
                                        (click)="BtnInformacionGeneral(respu)">
                                        Información general
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 mb-3">
            </div>
            <!--PARTICIPANTE-->
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Tipo referido(Participante)<span class="spObl">*</span></label>
                <select class="form-control form-control-sm textBox" [(ngModel)]="IdParticioanteRegalos"
                    (change)="ChangeRegaloParticipanteReferido()">
                    <option value="0">Seleccionar</option>
                    <option value="{{respu.IdTipo}}" *ngFor="let respu of ArrayRegalosParticipante">
                        {{respu.Descripcion}}
                    </option>
                </select>
            </div>
            <div class="col-sm-4" *ngIf="IdParticioanteRegalos == '2' || IdParticioanteRegalos == '3'">
                <label class="col-sm-12 TextoAgroSmall">Maximo de valor y/o porcentaje a obtener<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox">
            </div>
            <div class="col-sm-4" *ngIf="IdParticioanteRegalos == '2' || IdParticioanteRegalos == '3'">
                <label class="col-sm-12 TextoAgroSmall">Numero de registros para obtener valor y/o porcentaje<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox">
            </div>
            <div class="col-sm-4" *ngIf="IdParticioanteRegalos == '2' || IdParticioanteRegalos == '3'">
                <label class="col-sm-12 TextoAgroSmall">Valor y/o porcentaje a obtener<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox">
            </div>
            <div class="col-sm-4" *ngIf="IdParticioanteRegalos == '1'">
                <label class="col-sm-12 TextoAgroSmall">Producto regalo<span class="spObl">*</span>
                </label>
                <select class="form-control form-control-sm textBox"
                    (change)="changeProductosRegaloDisponiblesParticipante()" [(ngModel)]="IdProdRegaloParti">
                    <option value="0">Seleccionar</option>
                    <option value="{{respu.IdOferta}}" *ngFor="let respu of ArregloProductosRegaloParti">
                        {{respu.NombreProducto}}
                    </option>
                </select>
            </div>
            <div class="col-md-6 m-0 p-1 mt-2" *ngIf="IdParticioanteRegalos == '1' && IdProdRegaloParti != '0'">
                <div class="m-0 p-2" *ngFor="let respu of  ArregloInfoRegaloParti"
                    style="background-color: #ffffff; border: 1px solid gainsboro; border-radius: 5px;">
                    <label class="Llave" style="font-size: 12px; color: #45ab1b !important;">
                        {{respu.NombreProducto}}
                    </label>
                    <label class="Llave" style="font-size: 12px; color: red !important;">
                        &nbsp; - {{respu.DescrTipoVentaProducto}}
                    </label>
                    <div style="display: flex; background-color: #ffffff; padding: 5px;">
                        <img src="{{RutaImagenProducto}}{{respu.ImagenOferta}}" style="height: 130px; width: 130px;">
                        <div style="width: 100%; padding: 10px;">
                            <label><small><strong>{{respu.DescripcionCorta}}</strong> </small></label>
                            <br>
                            <label><small>{{respu.DescripcionLarga}}</small></label>
                            <div style="width: 100%; padding: 10px; display: flex; justify-content: space-between;">
                                <div class="mt-3" style=" text-align: center;" *ngIf="respu.IdEstado != '0'">
                                    <label class="Btn-AgroPrin" style="margin: auto;"
                                        (click)="BtnModalDetallePresentaciones(respu)">
                                        Presentaciones
                                    </label>
                                </div>
                                <div class="mt-3" style=" text-align: center;" *ngIf="respu.IdEstado != '0'">
                                    <label class="Btn-AgroPrin" style="margin: auto;"
                                        (click)="BtnInformacionGeneral(respu)">
                                        Información general
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="w-100 mt-3" style=" text-align: center;">
                    <label class="Btn-AgroPrin" style="margin: auto;" (click)="BtnGuardarInformacionReferidos()">
                        Guardar información referidos / grupal
                    </label>
                </div>
            </div>
        </div>
        <hr *ngIf="VerOcultarModulos == '2'">
        <!--LOCALIDAD PARA LA OFERTA-->
        <div class="row m-0 p-0" *ngIf="VerOcultarModulos == '2'">
            <div class="col-12 mb-1" style="display: flex;">
                <label class="SubTituloAgro">Localidad oferta</label>
                <img src="https://cdn-icons-png.flaticon.com/128/8387/8387527.png" (click)="BtnAgregarLocalidad()"
                style="width: 30px; height: 30px; cursor: pointer; margin-left: 10px;">
            </div>
            <div style="display: flex;">
                <label class="TextoAgroSmall CursorPointer" (click)="BtnModalImagenSector()">
                    Seleccionar imagen sector
                </label>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Localidad<span class="spObl">*</span></label>
                <select class="form-control form-control-sm textBox" (change)="changeSelectLocalidad()"
                    [(ngModel)]="IdLocalidad">
                    <option value="0">Seleccionar</option>
                    <option *ngFor="let respu of ArrayLocalidadesTipo" value="{{respu.IdTipo}}">
                        {{respu.Descripcion}}
                    </option>
                </select>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Sector<span class="spObl">*</span></label>
                <select class="form-control form-control-sm textBox" [(ngModel)]="IdSector">
                    <option value="0">Seleccionar</option>
                    <option *ngFor="let respu of ArraySectorTipo" value="{{respu.IdTipoZona}}">
                        {{respu.Descripcion}}
                    </option>
                </select>
            </div>
            <div class="col-sm-4 mt-3">
                <img src="https://cdn-icons-png.flaticon.com/128/8387/8387527.png" (click)="BtnAgregarLocalidadOferta()"
                    style="width: 35px; height: 35px; margin-top: 10px; cursor: pointer;">
            </div>
            <div class="row mt-3" *ngFor="let respu of ArraySectoresOferta">
                <div class="col-8">
                    <label class="form-control form-control-sm ">{{respu.Descripcion}}</label>
                </div>
                <div class="col-sm-4" style="display:flex">
                    <img src="https://cdn-icons-png.flaticon.com/128/5974/5974771.png"
                        style="width: 25px; height: 25px; cursor: pointer;" (click)="EliminarSectorOferta(respu)">
                </div>
            </div>
        </div>
        <hr *ngIf="VerOcultarModulos == '2'">
        <!--CUPONES DE LA OFERTA-->
        <div class="row m-0 p-0" *ngIf="VerOcultarModulos == '2'" style="display: none;">
            <div class="col-12 mb-1">
                <label class="SubTituloAgro">Regalos para la oferta (Estos aplican solamente para compras de la oferta
                    actual)</label>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Tipo de regalo</label>
                <select class="form-control form-control-sm textBox" [(ngModel)]="IdTipoRegalo">
                    <option value="0">Seleccionar</option>
                    <option value="{{respu.IdTipo}}" *ngFor="let respu of ArrayRegalosTipo">
                        {{respu.Descripcion}}
                    </option>
                </select>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Aplicable a</label>
                <select class="form-control form-control-sm textBox" [(ngModel)]="IdTipoRegaloPersona">
                    <option value="0">Seleccionar</option>
                    <option value="{{respu.IdTipo}}" *ngFor="let respu of ArrayRegalosPersonaTipo">
                        {{respu.Descripcion}}
                    </option>
                </select>
            </div>
            <div class="col-sm-4" style="display:flex">
                <img src="https://cdn-icons-png.flaticon.com/128/8387/8387527.png" (click)="BtnAgregarRegaloDefecto()"
                    style="width: 35px; height: 35px; margin-top: 28px; margin-left: 10px; cursor: pointer;">
            </div>
            <div class="row mt-3" *ngFor="let respu of ArrayRegalosOferta">
                <div class="col-8">
                    <label
                        class="form-control form-control-sm "><strong>{{respu.DesTipoRegalo}}:&nbsp;</strong>{{respu.DesAplicablePer}}</label>
                </div>
                <div class="col-sm-4" style="display:flex">
                    <img src="https://cdn-icons-png.flaticon.com/128/5974/5974771.png"
                        style="width: 25px; height: 25px; cursor: pointer;">
                    <img src="https://cdn-icons-png.flaticon.com/128/1265/1265907.png"
                        style="width: 25px; height: 25px; cursor: pointer; margin-left: 10px;">
                </div>
            </div>
        </div>
        <hr *ngIf="VerOcultarModulos == '2'">
        <!--FILTRO PRODUCTOS-->
        <div class="row m-0 p-0" *ngIf="VerOcultarModulos == '2'">
            <div class="col-12 mb-1" style="display: flex;">
                <label class="SubTituloAgro">Productos</label>
                <img src="https://cdn-icons-png.flaticon.com/128/8387/8387527.png" (click)="BtnModalNuevoProducto()"
                    style="width: 30px; height: 30px; cursor: pointer; margin-left: 10px;">
            </div>
            <div class="col-sm-6" style="display: flex;">
                <div class="m-0 p-0 w-100">
                    <label class="col-sm-12 TextoAgroSmall">Nombre producto</label>
                    <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="nombreFiltroProducto">
                </div>
                <img src="https://cdn-icons-png.flaticon.com/128/7088/7088387.png" (click)="FiltrosGeneralProducto()"
                    style="width: 35px; height: 35px; margin-top: 25px; margin-left: 10px; cursor: pointer;">
            </div>
        </div>
        <!--TARJETAS PRODUCTOS-->
        <div class="row m-0 p-0 mt-3" *ngIf="VerOcultarModulos == '2'">
            <div class="col-md-4 m-0 p-1" *ngFor="let respu of  ArrayProductosGeneralesOferta">
                <div class="m-0 p-2" *ngIf="respu.TipoVentaProducto == '1'"
                    style="background-color: #ffffff; border: 1px solid gainsboro; border-radius: 5px;">
                    <label class="Llave" style="font-size: 12px; color: #45ab1b !important;">
                        {{respu.NombreProducto}}
                    </label>
                    <label class="Llave" style="font-size: 12px; color: red !important;">
                        &nbsp; - {{respu.DescrTipoVentaProducto}}
                    </label>
                    <div style="display: flex; background-color: #ffffff; padding: 5px;">
                        <img src="{{RutaImagenProducto}}{{respu.ImagenOferta}}" style="height: 130px; width: 130px;">
                        <div style="width: 100%; padding: 10px;">
                            <div class="w-100 mt-3" style=" text-align: center;" *ngIf="respu.IdEstado != '0'">
                                <label class="Btn-AgroPrin" style="margin: auto;"
                                    (click)="BtnModalDetallePresentaciones(respu)">
                                    Presentaciones
                                </label>
                            </div>
                            <div class="w-100 mt-3" style=" text-align: center;" *ngIf="respu.IdEstado != '0'">
                                <label class="Btn-AgroPrin" style="margin: auto;"
                                    (click)="BtnInformacionGeneral(respu)">
                                    Información general
                                </label>
                            </div>
                            <div class="w-100 mt-3" style=" text-align: center;" *ngIf="respu.IdEstado != '0'">
                                <label class="Btn-AgroPrin" style="margin: auto;"
                                    (click)="DesActivarProductoOferta(respu)">
                                    Eliminar producto
                                </label>
                            </div>
                            <div class="w-100 mt-3" style=" text-align: center;" *ngIf="respu.IdEstado == '0'">
                                <label class="Btn-AgroPrin" style="margin: auto;"
                                    (click)="ActivarProductoOferta(respu.IdOferta)">
                                    Agregar producto
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row justify-content-center mt-5">
            <button type="button" class="btn btn-agro-prin col-sm-3 col-6" (click)="BtnPublicarOferta()">
                Publicar oferta</button>
            <div class="col-1"></div>
            <button type="button" class="btn btn-agro-prin col-sm-3 col-6" (click)="BtnCerrarOferta()">
                Cerrar oferta</button>
        </div>
    </div>
</div>

<!--AREA MODALES-->
<ng-template #ModalRespuesta let-modal>
    <div class="modal-header">
        <h1>Respuesta</h1>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <div class="row br">
            <div class="col-sm-12">
                <h2 class="TituloDetalle">Respuesta</h2>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        <button type="button" class="btn btn-agro-prin col-sm-2 col-6" (click)="modal.close()">Aceptar</button>
    </div>
    <br>
</ng-template>

<ng-template #ModalFechasOferta let-modal>
    <div class="modal-header">
        <h1 class="TituloAgro">AgroApoya2</h1>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-sm-12">
                <h2 class="SubTituloAgro">Fechas de anteriores ofertas</h2>
            </div>
            <div class="mt-3 mb-4">
                <table class="tableSimple">
                    <tr>
                        <th>Oferta</th>
                        <th>Fecha inicio</th>
                        <th>Fecha fin</th>
                        <th>Fecha Entrega</th>
                        <th>Tipo Oferta</th>
                    </tr>
                    <tr *ngFor="let respu of ArrayFechasOferta">
                        <td>{{respu.id}}</td>
                        <td>{{respu.FechaCreacion}}</td>
                        <td>{{respu.FechaFin}}</td>
                        <td>{{respu.FechaEntrega}}</td>
                        <td>{{respu.DesTipoOferta}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        <button type="button" class="btn Btn-AgroPrin col-sm-2 col-6" (click)="modal.close()">Aceptar</button>
    </div>
    <br>
</ng-template>

<ng-template #ModalImfOfertaSector let-modal>
    <div class="modal-header">
        <h1 class="TituloAgro">AgroApoya2</h1>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-sm-12">
                <h2 class="SubTituloAgro">Selecciona la imagen para el sector</h2>
            </div>

            <div class="mt-3 contenedorImagenes">
                <div class="ImgProducto" *ngFor="let respu of ArrayImagenesSector">
                    <img src="{{RutaImagenSector}}{{respu.Nombre}}" (click)="ImgSeleccionarImgSector(respu)">
                    <img src="./../../../../../assets/ImagenesAgroApoya2Adm/z_check.png" class="imgpresentacion mt-2"
                        *ngIf="respu.Relacion == '1'">
                </div>
                <div class="image-upload">
                    <label for="file-input1">
                        <img id="ImgSec" title="Selecciona una imagen"
                            src="./../../../../../assets/ImagenesAgroApoya2Adm/z_subirImagen.png">
                    </label>
                    <input name="file-input1" id="file-input1" type="file" (change)="SubirImgMapa($event)" />
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center mt-4">
        <button type="button" class="btn Btn-AgroPrin col-sm-2 col-6" (click)="modal.close()">Aceptar</button>
    </div>
    <br>
</ng-template>

<ng-template #ModalPresentaciones let-modal>
    <div class="modal-header">
        <h2>Presentaciones del producto</h2>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-sm-12">
                <h2><strong>{{NombreProducto}}</strong></h2>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Presentacion<span class="spObl">*</span></label>
                <div style="display: flex;">
                    <select class="form-control form-control-sm textBox" [(ngModel)]="IdPresentacionPres"
                        [disabled]="BanderaInserActu == '2'">
                        <option value="0">Seleccionar</option>
                        <option value="{{respu.IdTipo}}" *ngFor="let respu of ArrayPresentacionProd">
                            {{respu.Descripcion}}
                        </option>
                    </select>
                    <img src="https://cdn-icons-png.flaticon.com/128/8387/8387527.png"
                        (click)="BtnAgregarRelacionPrecentacion()"
                        style="width: 30px; height: 30px; margin-top: 5px; cursor: pointer;">
                </div>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Unidades totales disponibles<span class="spObl">*</span></label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="UndTotalPress">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Maximo unidades x compra <span class="spObl">*</span></label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="MaximoUndPres">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Valor real<span class="spObl">*</span></label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="ValorRealPres">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Valor referencia<span class="spObl">*</span></label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="ValorReferenciaPres"
                    (input)="KeyPressRFeferencia($event)">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">% Descuento<span class="spObl">*</span></label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="PorcentajePres"
                    (input)="KeyPressDescu($event)">
            </div>
            <div class="col-12 mt-4">
                <div class="row justify-content-center">
                    <button type="button" class="btn btn-agro-prin col-sm-2 col-6"
                        (click)="BtnGuardarDetallePresentaciones()" style="margin-right: 5px;"
                        *ngIf="BanderaInserActu == '1'">Guardar</button>
                    <button type="button" class="btn btn-agro-prin col-sm-2 col-6"
                        (click)="BtnActualizarDetallePresentaciones()" style="margin-right: 5px;"
                        *ngIf="BanderaInserActu == '2'">Actualizar</button>

                    <button type="button" class="btn btn-agro-prin col-sm-2 col-6" (click)="BtnLimpiar()"
                        style="margin-left: 5px;">Limpiar</button>
                </div>
            </div>
            <div class="col-12 mt-4">
                <div class="table-responsive">
                    <table class="table col-sm-12 TableAgro">
                        <tr id="TablaValoracion">
                            <th>Unidades</th>
                            <th>Maximo Unidades</th>
                            <th>Presentación</th>
                            <th>Valor</th>
                            <th>Valor Referencia</th>
                            <th>Acciones</th>
                        </tr>
                        <tr *ngFor="let respu of ArrayDetalleProdPres">
                            <td>{{respu.UnidadesDisponibles}}</td>
                            <td>
                                {{respu.MaximoUnidades}}
                            </td>
                            <td>{{respu.DescPresentacion}}</td>
                            <td>{{ respu.ValorReal | currency:'COP':'symbol-narrow':'1.0-0' }}</td>
                            <td>{{ respu.ValorReferencia | currency:'COP':'symbol-narrow':'1.0-0' }}</td>

                            <td>
                                <button class="SinEstilo" title="Eliminar presentación">
                                    <img src="./../../../../../assets/ImagenesAgroApoya2Adm/basura.png"
                                        class="imgpresentacion" (click)="BtnEliminarRegistro(respu)">
                                </button>
                                <button class="SinEstilo" title="Editar presentación">
                                    <img src="./../../../../../assets/ImagenesAgroApoya2Adm/Editar.png"
                                        class="imgpresentacion" (click)="BtnSubirActualizarRegistro(respu)">
                                </button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <br>
</ng-template>

<ng-template #ModalNuevoProducto let-modal>
    <div class="modal-header">
        <h1>AgroApoya2</h1>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-sm-12">
                <h2 class="TituloDetalle">Añadir un producto nuevo</h2>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Nombre producto</label>
                <input type="text" class="form-control form-control-sm textBox">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Descripción corta</label>
                <input type="text" class="form-control form-control-sm textBox">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Descripción larga</label>
                <input type="text" class="form-control form-control-sm textBox">
            </div>
            <div class="col-sm-4" style="display: flex;">
                <div class="w-100">
                    <label class="col-sm-12 TextoAgroSmall">Prensentaciones asociadas</label>
                    <input type="text" class="form-control form-control-sm textBox">
                </div>
                <img src="https://cdn-icons-png.flaticon.com/128/8387/8387527.png"
                    style="width: 30px; height: 30px; cursor: pointer; margin-left: 10px; margin-top: 30px;">
            </div>
            <div class="col-12 mt-3">
                <div class="col-3 p-1" style="display: flex;">
                    <div class="w-100"
                        style="border: 1px solid #b9b9b9; border-radius: 5px; text-align: center; background-color: #e1e1e1;">
                        <label>X 2 Libras</label>
                    </div>
                    <img src="./../../../../../assets/ImagenesAgroApoya2Adm/basura.png" class="imgpresentacion"
                        style="margin-left: 10px;">
                </div>
            </div>

            <div class="contenedorImagenes mt-3">
                <div class="ImgProducto">
                    <img src="https://cdn-icons-png.flaticon.com/128/8191/8191568.png">
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        <button type="button" class="btn btn-agro-prin col-sm-2 col-6" (click)="modal.close()">Aceptar</button>
    </div>
    <br>
</ng-template>

<ng-template #ModalInfoGeneralProducto let-modal>
    <div class="modal-header">
        <h1>Información general del producto</h1>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <div class="col-sm-12">
            <h2 class="TituloDetalle">Nombre del producto</h2>
        </div>
        <br>
        <div class="row">
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Nombre del producto<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="NombreProductoDet">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Descripcion corta<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="DescripCortaDet">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Descripcion larga<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="DescripLargaDet">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Prefijo<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="PrefijoDet">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Tipo venta producto<span class="spObl">*</span>
                </label>
                <select class="form-control form-control-sm textBox" [(ngModel)]="TipoVentaProdDet" disabled>
                    <option value="{{respu.IdTipo}}" *ngFor="let respu of ArrayTipoVentaProd">
                        {{respu.Descripcion}}
                    </option>
                </select>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Estado<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox" [(ngModel)]="EstadoDet" disabled>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        <button type="button" class="btn btn-agro-prin col-sm-3 col-6" (click)="GuardarInformacionProducto()">Guardar
            información</button>
    </div>

    <div class="row m-2 mt-3 ">
        <div class="col-sm-12">
            <h2 class="SubTituloAgro">Imagen asociadas al producto</h2>
        </div>
        <div class="mt-3 contenedorImagenes">
            <div class="ImgProducto" *ngFor="let respu of ArrayImagenesProducto">
                <img src="{{RutaImagenProducto}}{{respu.Nombre}}" (click)="ImgSeleccionarImgProducto(respu)">
                <img src="./../../../../../assets/ImagenesAgroApoya2Adm/z_check.png" class="imgpresentacion mt-2"
                    *ngIf="respu.Orden == '1'">
                <img src="./../../../../../assets/ImagenesAgroApoya2Adm/basura.png" class="imgpresentacion mt-2"
                    *ngIf="respu.Orden != '1'" (click)="BtnEliminarImagen(respu)">
            </div>
            <div class="image-upload">
                <label for="file-input1">
                    <img id="ImgSec" title="Selecciona una imagen"
                        src="./../../../../../assets/ImagenesAgroApoya2Adm/z_subirImagen.png">
                </label>
                <input name="file-input1" id="file-input1" type="file" (change)="SubirImgProducto($event)" />
            </div>
        </div>
    </div>
    <br>
</ng-template>

<ng-template #ModalRelacionPrecentacion let-modal>
    <div class="modal-header">
        <h1>Nueva precentación para el producto</h1>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <div class="row br">
            <div class="col-sm-12">
                <h2 class="TituloDetalle">Respuesta</h2>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Precentaciones<span class="spObl">*</span></label>
                <select class="form-control form-control-sm textBox" [(ngModel)]="IdRelaPresenModl">
                    <option value="0">Seleccionar</option>
                    <option value="{{respu.IdTipo}}" *ngFor="let respu of ArrayPresentacionesModl">
                        {{respu.Descripcion}}
                    </option>
                </select>
            </div>
            <div class="col-4">
                <label class="col-sm-12 TextoAgroSmall"></label>
                <button type="button" class="btn btn-agro-prin" (click)="BtnAdicionarPrecentacion()">Adicionar</button>
            </div>

            <div class="row mt-3">
                <div class="col-3" style="padding: 5px;" *ngFor="let respu of ArrayPresentacionProd">
                    <label style="border: 1px solid gainsboro; border-radius: 5px; width: 100%; padding: 5px;
                        font-size: 12px; background-color: #E6E6E6; display: flex; justify-content: space-between;">
                        <strong>{{respu.Descripcion}}</strong>
                        <img src="./../../../../../assets/ImagenesAgroApoya2Adm/basura.png" class="imgpresentacion"
                            (click)="BtnEliminarRelaconPresenta(respu)">
                    </label>
                </div>
            </div>

        </div>
    </div>
    <div class="row justify-content-center mt-3">
        <button type="button" class="btn btn-agro-prin col-sm-2 col-6" (click)="modal.close()">Aceptar</button>
    </div>
    <br>
</ng-template>

<ng-template #ModalCupones let-modal>
    <div class="modal-header">
        <h1>Seleccionar Cupon</h1>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <div class="row br">
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Tipo cupon<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox" disabled>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Código mostrar<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Descripción<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Descuento aplicable<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox">
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Apartir valor<span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox" disabled>
            </div>
            <div class="col-sm-4">
                <label class="col-sm-12 TextoAgroSmall">Aplicable a <span class="spObl">*</span>
                </label>
                <input type="text" class="form-control form-control-sm textBox" disabled>
            </div>
        </div>
        <div class="row justify-content-center mt-3">
            <button type="button" class="btn btn-agro-prin col-sm-4 col-6">Guardar</button>
            <div class="col-1">

            </div>
            <button type="button" class="btn btn-agro-prin col-sm-4 col-6">Limpiar</button>
        </div>
        <div class="row m-2 mt-4">
            <h5 style="font-size: 12 px !important;" class="col-12">Cupones activos</h5>
            <table class="table table-striped table-bordered">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col" class="TextoAgroSmall">Tipo Cupon</th>
                        <th scope="col" class="TextoAgroSmall">Codigo mostrar</th>
                        <th scope="col" class="TextoAgroSmall">Descripción</th>
                        <th scope="col" class="TextoAgroSmall">Descuento aplicable</th>
                        <th scope="col" class="TextoAgroSmall">Apartir valor</th>
                        <th scope="col" class="TextoAgroSmall">Aplicable a</th>
                        <th scope="col" class="TextoAgroSmall">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let respu of ArrayCuponesDisponibles">
                        <td class="TextoAgroSmall">{{respu.DescTipoCupon}}</td>
                        <td class="TextoAgroSmall">{{respu.codigo_Mostrar}}</td>
                        <td class="TextoAgroSmall">{{respu.Decripcion}}</td>
                        <td class="TextoAgroSmall">{{respu.DescuentoAplicable}}</td>
                        <td class="TextoAgroSmall">{{respu.ApartirValor}}</td>
                        <td class="TextoAgroSmall">{{respu.DescTipoPersonaAplic}}</td>
                        <td class="TextoAgroSmall" style="display: flex; justify-content: space-around;">
                            <img src="./../../../../../assets/ImagenesAgroApoya2Adm/z_check.png"
                                class="imgpresentacion mt-2">
                            <img src="./../../../../../assets/ImagenesAgroApoya2Adm/Editar.png"
                                class="imgpresentacion mt-2">
                            <img src="./../../../../../assets/ImagenesAgroApoya2Adm/basura.png"
                                class="imgpresentacion mt-2">
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="row justify-content-center">
        <button type="button" class="btn btn-agro-prin col-sm-2 col-6" (click)="modal.close()">Aceptar</button>
    </div>
    <br>
</ng-template>

<ng-template #AgregarLocalidad let-modal>
    <div class="modal-header">
        <h1>Respuesta</h1>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <div class="row br">
            <div class="col-sm-12">
                <h2 class="TituloDetalle">Respuesta</h2>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        <button type="button" class="btn btn-agro-prin col-sm-2 col-6" (click)="modal.close()">Aceptar</button>
    </div>
    <br>
</ng-template>
<div class="Fondo">
    <br><br>
    <div class="container bg-white">
        <h1>Modificar Oferta Publicada</h1>
        <div class="row justify-content-center">
            <div class="col-sm-6">
                <label class="Llave">Oferta</label>
                <ng-autocomplete [data]="ArrayOferta" [searchKeyword]="keywordOferta" placeholder="Oferta"
                    (inputCleared)="LimpiaOferta('')" (selected)='selectOfertaFiltro($event)'
                    [itemTemplate]="templateOferta" [notFoundTemplate]="templateVacio" [(ngModel)]="Oferta">
                </ng-autocomplete>
                <ng-template #templateOferta let-item>
                    <a [innerHTML]="item.Producto"></a>
                </ng-template>
                <ng-template #templateVacio let-SinRegistro>
                    <label for="">Sin registros</label>
                </ng-template>
            </div>        
        </div>

        <div class="row justify-content-center br tarjetadetalle" *ngFor="let oferta of DataOferta">
            <div class="row m-2">
                <div class="col-sm-3">
                    <img src={{RutaImagen+oferta.IMAGEN}} class="col-sm-12 ImgOferta">
                </div>
                <div class="col-sm-9">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-12">
                                    <label class="Llave TextMay">Código oferta:&nbsp;</label><label
                                        class="ValorIDOfer"><strong>{{oferta.COD_OFR_PUBLICO}}</strong></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="row">
                                <div class="col-sm-12">
                                    <label class="Llave">Producto:&nbsp;</label><label
                                        class="Valor">{{oferta.Nombre_Producto}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="row">
                                <div class="col-sm-12">
                                    <label class="Llave">Presentación empaque:&nbsp;</label><label
                                        class="Valor">{{oferta.Descripcion_empaque}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="row">
                                <div class="col-sm-12">
                                    <label class="Llave">Tamaño:&nbsp;</label><label
                                        class="Valor">{{oferta.Nmbre_tamano}}</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="row">
                                <div class="col-sm-12">
                                    <label class="Llave">Condición entrega:&nbsp;</label> <label
                                        class="Valor">{{oferta.Condicion_entrega}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">

                        <div class="col-sm-6">
                            <div class="row">
                                <div class="col-sm-12">
                                    <label class="Llave">Unidades disponibles:&nbsp;</label><label
                                        class="Valor">{{oferta.Unidades_disponibles}}</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr class="hrSinEstilo">

                    <div class="row">
                        <div class="col-sm-12">
                            <label class="Llave">Caracterización:&nbsp;</label><label
                                class="Valor">{{oferta.caracterizacion}}</label>
                        </div>
                    </div>
                    <hr class="hrSinEstilo">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="row">
                                <div class="col-sm-12">
                                    <label class="Llave">Fecha recogida:&nbsp;</label><label
                                        class="Valor">{{oferta.fecha_recogida}}</label>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-12">
                                    <label class="Llave">Estado oferta:&nbsp;</label><label
                                        class="textblue"><strong>{{oferta.Nombre_estado}}</strong></label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row justify-content-center ">
                <div class="col-sm-1">
                    <div class="row justify-content-center">
                        <button class="SinEstilo col-sm-11">
                            <img class="BtnimgTamano" src="./../../../../../assets/ImagenesAgroApoya2Adm/Editar.png"
                                title="Editar oferta">
                        </button>
                        <label class="col-sm-11 CentrarText">Editar</label>
                    </div>
                </div>
                <div class="col-sm-1">
                    <div class="row justify-content-center">
                        <button class="SinEstilo col-sm-11">
                            <img class="BtnimgTamano" src="./../../../../../assets/ImagenesAgroApoya2Adm/Cerrar.png"
                                title="Cerrar oferta">
                        </button>
                        <label class="col-sm-11 CentrarText">Cerrar</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="row br" *ngIf="ValidaVigencia=='1'">
            <h5 class="SubTituloForm">Definición vigencia oferta</h5>
            <div class="row br">
                <ngb-accordion #acc="ngbAccordion" activeIds="config-panel-three">
                    <ngb-panel title="Definición vigencia oferta" id="config-panel-three">
                        <ng-template ngbPanelContent>
                            <div class="row br">
                                <div class="col-sm-6">
                                    <label class="col-sm-12 Llave">Vigencia desde</label>
                                    <input type="date" class="col-sm-12 form-control mt-1 textBox"
                                        [(ngModel)]="VigenDesde" (blur)="ValidaVigencias(ModalRespuesta, '1')">
                                </div>
                                <div class="col-sm-6">
                                    <label class="col-sm-12 Llave">Vigencia hasta</label>
                                    <input type="date" class="col-sm-12 form-control mt-1 textBox"
                                        [(ngModel)]="VigenHasta" (blur)="ValidaVigencias(ModalRespuesta, '2')">
                                </div>
                            </div>
                            <div class="row br">
                                <div class="col-sm-6">
                                    <label class="col-sm-12 Llave">Fecha entrega</label>
                                    <input type="date" class="col-sm-12 form-control mt-1 textBox"
                                        [(ngModel)]="FechaEntrega" (blur)="ValidaVigencias(ModalRespuesta, '3')">
                                </div>
                                <div class="col-sm-6">
                                    <label class="col-sm-12 Llave">Fecha recogida</label>
                                    <input type="date" class="col-sm-12 form-control mt-1 textBox"
                                        [(ngModel)]="SessionFechaRecogida"
                                        (blur)="ValidaVigencias(ModalRespuesta, '4')">
                                </div>
                            </div>
                            <div class="row br">
                                <div class="col-sm-12">
                                    <label class="col-sm-12 Llave">Observaciones</label>
                                    <textarea class="col-sm-12 form-control mt-1 textArea" cols="30" rows="3"
                                        [(ngModel)]="Observaciones"></textarea>
                                </div>
                            </div>
                            <div class="row justify-content-center br">
                                <div class="col-sm-2 ">
                                    <button class="btn btn-agro-prin col-sm-12"
                                        (click)="GuardaVigencia(ModalRespuesta)">Guardar</button>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-panel>
                </ngb-accordion>
            </div>


            <div class="row br">
                <h5 class="SubTituloForm">Definición tipo oferta</h5>
            </div>
            <div class="row br">
                <div class="col-sm-12">
                    <label class="col-sm-12 Llave mb-1">Tipo oferta</label>
                    <ng-autocomplete [data]="DataTipoOferta" [searchKeyword]="keyword"
                        (selected)='selectTipOferta($event)' [initialValue]="ArrayTipoOferCon[0]"
                        (inputCleared)='LimpiaTipoOferta($event)' placeholder="Individual o Mixta"
                        [itemTemplate]="templateOfer" [notFoundTemplate]="templateVacio">
                    </ng-autocomplete>
                    <ng-template #templateOfer let-item>
                        <a [innerHTML]="item.name"></a>
                    </ng-template>
                    <ng-template #templateVacio let-SinRegistro>
                        <label for="">Sin registros</label>
                    </ng-template>
                </div>
            </div>
            <div class="row br">

            </div>

            <div class="row br">
                <h5 class="SubTituloForm">Definición valor de las unidades</h5>
            </div>
            <div class="row br">
                <ngb-accordion #acc="ngbAccordion" activeIds="config-panel-three">
                    <ngb-panel title="Valor unidades" id="config-panel-three">
                        <ng-template ngbPanelContent>
                            <div class="row br">
                                <div class="col-sm-6">
                                    <label class="col-sm-12 Llave">Valor</label>
                                    <input mask="separator" thousandSeparator="." type="text"
                                        class="col-sm-12 form-control mt-1 textBox">
                                </div>
                                <div class="col-sm-1 position-relative">
                                    <button class="SinEstilo position-absolute bottom-0 start-0"
                                        title="Agregar unidades">
                                        <img src=".../../../../../../../assets/ImagenesAgroApoya2Adm/mas.png"
                                            width="30px" height="30px">
                                    </button>
                                </div>
                            </div>
                            <div class="row justify-content-center br">
                                <div class="table-responsive">
                                    <table class="table col-sm-12 TableAgro">
                                        <tr id="TablaValores">
                                            <th>Valor</th>
                                            <th>Orden</th>
                                            <th>Acciones</th>
                                        </tr>
                                        <tr>
                                            <td>xxx</td>
                                            <td>xxx</td>
                                            <td>
                                                <button class="SinEstilo" title="Eliminar amparado">
                                                    <img
                                                        src="./../../../../../assets/ImagenesAgroApoya2Adm/basurarojo.png">
                                                </button>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-panel>
                </ngb-accordion>
            </div>
            <br>
            <ngb-accordion #acc="ngbAccordion" activeIds="config-panel-one">
                <ngb-panel title="Valor de referencia" id="config-panel-one">
                    <ng-template ngbPanelContent>
                        <div class="row">
                            <div class="col-12">
                                <label class="col-sm-12 Llave">Valor referencia</label>
                            </div>
                            <div class="col-sm-6 mt-2">
                                <input mask="separator" thousandSeparator="." type="text"
                                    class="col-sm-12 form-control mt-1 textBox">
                            </div>
                            <div class="col-4 col-sm-4 mt-2">
                                <button class="btn btn-agro-prin col-12">Guardar</button>
                            </div>
                            <div class="col-4 col-sm-2 mt-2">
                                <button type="button" class="btn btn-agro-prin col-12">Presentaciones</button>
                            </div>
                        </div>
                    </ng-template>
                </ngb-panel>
            </ngb-accordion>
            <div class="row br">
                <h5 class="SubTituloForm">Definición conceptos adicionales</h5>

            </div>

            <div class="row br">
                <ngb-accordion #acc="ngbAccordion" activeIds="config-panel-three">
                    <ngb-panel title="Adicionales" id="config-panel-three">
                        <ng-template ngbPanelContent>
                            <div class="col-sm-2 col-12 br">
                                <button type="button" class="btn btn-agro-prin col-sm-12">
                                    Crear/Editar Producto</button>
                            </div>
                            <div class="row br">
                                <div class="col-sm-4 mt-2 mb-2">
                                    <label class="col-sm-12 Llave mt-1">Tipo</label>
                                    <ng-autocomplete>
                                    </ng-autocomplete>
                                    <ng-template #templateOfer let-item>
                                        <a [innerHTML]="item.Descripcion"></a>
                                    </ng-template>
                                    <ng-template #templateVacio let-SinRegistro>
                                        <label for="">Sin registros</label>
                                    </ng-template>
                                </div>


                                <div class="col-sm-4 mt-2 mb-2">
                                    <label class="col-sm-12 Llave mt-1">Descripción</label>
                                    <input type="text" title="Descripción máximo 150 caracteres"
                                        class="col-sm-12 form-control mt-1 textBox" maxlength="150">
                                </div>
                                <div class="col-sm-4 mt-2 mb-2">
                                    <label class="col-sm-12 Llave mt-1">Descripción</label>
                                    <ng-autocomplete>
                                    </ng-autocomplete>
                                    <ng-template #templateProdTopp let-item>
                                        <a [innerHTML]="item.DSCRPCION"></a>
                                    </ng-template>
                                    <ng-template #templateVacioVenta let-SinRegistro>
                                        <label for="">Sin registros</label>
                                    </ng-template>
                                </div>


                                <div class="col-sm-4 mt-2 mb-2">
                                    <label class="col-sm-12 Llave mt-1">Tipo Adicional</label>
                                    <ng-autocomplete>
                                    </ng-autocomplete>
                                    <ng-template #templateOferVenta let-item>
                                        <a [innerHTML]="item.Descripcion"></a>
                                    </ng-template>
                                    <ng-template #templateVacioVenta let-SinRegistro>
                                        <label for="">Sin registros</label>
                                    </ng-template>
                                </div>
                                <div class="col-sm-4 mt-2">
                                    <label class="col-sm-12 Llave">Peso adición en kilogramos</label>
                                    <input type="number" class="col-sm-12 form-control mt-1 textBox">
                                </div>
                                <div class="col-sm-4 mt-2">
                                    <label class="col-sm-12 Llave">Valor unitario</label>
                                    <input mask="separator" thousandSeparator="." type="text"
                                        class="col-sm-12 form-control mt-1 textBox">
                                </div>
                                <div class="col-sm-4 mt-2">
                                    <label class="col-sm-12 Llave">Valor referencia</label>
                                    <input mask="separator" thousandSeparator="." type="text"
                                        class="col-sm-12 form-control mt-1 textBox">
                                </div>
                                <div class="col-sm-4 mt-2">
                                    <label class="col-sm-12 Llave">Descripción corta</label>
                                    <textarea name="DescCortaAdd" id="DescCortaAdd" cols="30" rows="5"
                                        class="form-control textBox" placeholder="Descripcion corta"></textarea>
                                </div>
                                <div class="col-sm-4 mt-2">
                                    <label class="col-sm-12 Llave">Descripción larga</label>
                                    <textarea name="DescLargaAdd" id="DescLargaAdd" cols="30" rows="5"
                                        class="form-control textBox" placeholder="Descripcion larga"></textarea>
                                </div>
                                <div class="col-sm-4 mt-2">
                                    <label class="col-sm-12 Llave">Unidades para la oferta</label>
                                    <input type="number" class="col-sm-12 form-control mt-1 textBox">
                                </div>
                                <div class="col-sm-4 mt-2">
                                    <label class="col-sm-12 Llave">Máximo unidades por cada compra</label>
                                    <input type="number" class="col-sm-12 form-control mt-1 textBox">
                                </div>

                                <div class="col-sm-4 mt-2">
                                    <label class="col-sm-12 Llave">Presentación</label>
                                    <textarea name="DescCortaAdd" id="DescCortaAdd" cols="30" rows="5"
                                        class="form-control textBox" placeholder="Presentación"></textarea>
                                </div>
                            </div>

                            <div class="row br justify-content-center">
                                <h5 class="SubTituloForm">Selecciona las imagenes del producto adicional</h5>
                                <br><br>
                                <div class="col-sm-2 centraimagen">
                                    <div class="image-upload">
                                        <label for="file-input1">
                                            <img id="Imagen1" title="Selecciona una imagen"
                                                style="border-radius: 10px;">
                                        </label>
                                        <input name="file-input1" id="file-input1" type="file" />
                                    </div>
                                </div>
                                <div class="col-sm-2 centraimagen">
                                    <div class="image-upload">
                                        <label for="file-input2">
                                            <img id="Imagen2" title="Selecciona una imagen"
                                                style="border-radius: 10px;">
                                        </label>
                                        <input name="file-input2" id="file-input2" type="file" />
                                    </div>
                                </div>
                                <div class="col-sm-2 centraimagen">
                                    <div class="image-upload">
                                        <label for="file-input3">
                                            <img id="Imagen3" title="Selecciona una imagen"
                                                style="border-radius: 10px;">
                                        </label>
                                        <input name="file-input3" id="file-input3" type="file" />
                                    </div>
                                </div>
                            </div>

                            <div class="row justify-content-center br">
                                <div class="col-sm-3">
                                    <label class="col-sm-12 Llave"></label>
                                    <button class="btn btn-agro-prin col-sm-12">Agregar</button>
                                </div>
                            </div>

                            <div class="row justify-content-center br">
                                <div class="table-responsive">
                                    <table class="table col-sm-12 TableAgro">
                                        <tr id="TablaValoracion">
                                            <th>Descripción</th>
                                            <th>Descripción corta</th>
                                            <th>Descripción larga</th>
                                            <th>Valor unitario/ Valor referencia
                                            </th>
                                            <th>Tipo Toping venta</th>
                                            <th>Tipo</th>
                                            <th>Unidades para oferta</th>
                                            <th>Máximo unidades por compra</th>
                                            <th>Peso Adición</th>
                                            <th>Acciones</th>
                                        </tr>
                                        <tr>
                                            <td>xxx</td>
                                            <td>
                                                <div class="descripcionlarga">xxx</div>
                                            </td>
                                            <td>
                                                <div class="descripcionlarga">xxx</div>

                                            </td>
                                            <td><strong>xxx </strong> /
                                                xxx
                                            </td>
                                            <td>xxx</td>
                                            <td>xxx</td>
                                            <td>xxx</td>
                                            <td>xxx</td>
                                            <td>xxx</td>
                                            <td>

                                                <button class="SinEstilo" title="Eliminar amparado">
                                                    <img
                                                        src="./../../../../../assets/ImagenesAgroApoya2Adm/basurarojo.png">
                                                </button>
                                                <button class="SinEstilo" title="Imagen amparado">
                                                    <img src="./../../../../../assets/ImagenesAgroApoya2Adm/imagen.png">
                                                </button>
                                                <button class="SinEstilo" title="Presentaciones">
                                                    <img src="./../../../../../assets/ImagenesAgroApoya2Adm/Presentaciones.png"
                                                        class="imgpresentacion">
                                                </button>
                                            </td>
                                        </tr>

                                    </table>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-panel>
                </ngb-accordion>
            </div>

            <div class="row br">
                <h5 class="SubTituloForm">Textos para la oferta</h5>

            </div>
            <!--  -->
            <div class="row br">
                <ngb-accordion #acc="ngbAccordion" activeIds="config-panel-three">
                    <ngb-panel title="Textos Modal" id="config-panel-three">
                        <ng-template ngbPanelContent>
                            <div class="row">
                                <div class="col-sm-6 mt-2">
                                    <label class="col-sm-12 Llave">Texto modal uno</label>
                                    <input type="text" class="col-sm-12 form-control mt-1 textBox">
                                </div>

                                <div class="col-sm-6 mt-2">
                                    <label class="col-sm-12 Llave">Texto modal dos</label>
                                    <input type="text" class="col-sm-12 form-control mt-1 textBox">
                                </div>

                                <div class="col-sm-10 mt-2">
                                    <label class="col-sm-12 Llave">Texto modal tres</label>
                                    <textarea class="form-control form-control-sm textArea" cols="30"
                                        rows="3"></textarea>
                                </div>
                                <div class="col-sm-2 text-center">

                                    <div class="image-upload p-3">
                                        <label for="file-inputModal">
                                            <img id="Imagen1" title="Selecciona una imagen"
                                                style="border-radius: 10px;">
                                        </label>
                                        <input name="file-inputModal" id="file-inputModal" type="file" />
                                    </div>
                                </div>
                            </div>

                            <div class="row justify-content-center">
                                <div class="col-sm-3">
                                    <label class="col-sm-12 Llave"></label>
                                    <button class="btn btn-agro-prin col-sm-12">Precargar
                                        Información</button>
                                </div>
                                <div class="col-sm-3">
                                    <label class="col-sm-12 Llave"></label>
                                    <button class="btn btn-agro-sec col-sm-12">Limpiar</button>
                                </div>
                                <div class="col-sm-3">
                                    <label class="col-sm-12 Llave"></label>
                                    <button class="btn btn-agro-prin col-sm-12">Guardar</button>
                                </div>
                            </div>

                            <div class="row justify-content-center br">
                                <div class="table-responsive">
                                    <table class="table col-sm-12 TableAgro">
                                        <tr>
                                            <th>Texto Modal Uno</th>
                                            <th>Texto Modal Dos</th>
                                            <th colspan="3">Texto Modal Tres</th>
                                            <th>Imagen</th>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="descripcionlarga">xxx</div>
                                            </td>
                                            <td>
                                                <div class="descripcionlarga">xxx</div>
                                            </td>
                                            <td colspan="3">
                                                <div class="descripcionlarga">xxx</div>
                                            </td>
                                            <td>
                                                <button class="SinEstilo" title="Imagen amparado">
                                                    <img src="./../../../../../assets/ImagenesAgroApoya2Adm/imagen.png">
                                                </button>

                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-panel>
                </ngb-accordion>
            </div>
        </div>
        <!--  -->
        <br><br>

    </div>
</div>

<ng-template #ModalRespuesta let-modal>
    <div class="modal-header">
        <h1>Respuesta</h1>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <div class="row br">
            <h2 class="TituloDetalle">{{Respuesta}}</h2>
        </div>

    </div>
    <div class="row justify-content-center">
        <button type="button" class="btn btn-agro-prin col-sm-2" (click)="modal.close()">Aceptar</button>
    </div>
    <br>
</ng-template>